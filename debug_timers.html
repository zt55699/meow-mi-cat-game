<!DOCTYPE html>
<html>
<head>
    <title>Debug Timer System</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>
    <div id="test-results"></div>
    <div id="game"></div>

    <script>
        const results = document.getElementById('test-results');
        
        function logResult(message, color = 'black') {
            const div = document.createElement('div');
            div.style.color = color;
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(div);
            console.log(message);
        }

        // Test timer system behavior after scene restart
        const config = {
            type: Phaser.AUTO,
            width: 400,
            height: 300,
            parent: 'game',
            scene: {
                create: function() {
                    logResult('Scene created', 'blue');
                    
                    // Test if scene time system works
                    const timeTest = this.time.addEvent({
                        delay: 1000,
                        callback: () => {
                            logResult('âœ… Timer working: ' + this.time.now, 'green');
                        },
                        callbackScope: this,
                        loop: true
                    });
                    
                    logResult('Timer created: ' + !!timeTest);
                    
                    // Add restart button
                    const restartBtn = this.add.text(200, 150, 'RESTART SCENE', {
                        fontSize: '20px',
                        fill: '#ff0000',
                        backgroundColor: '#ffffff',
                        padding: { x: 10, y: 5 }
                    });
                    restartBtn.setOrigin(0.5);
                    restartBtn.setInteractive();
                    
                    restartBtn.on('pointerdown', () => {
                        logResult('ðŸ”„ Restarting scene...', 'orange');
                        this.scene.restart();
                    });
                    
                    // Test immediate timer after create
                    setTimeout(() => {
                        const immediateTest = this.time.addEvent({
                            delay: 500,
                            callback: () => {
                                logResult('âš¡ Immediate timer fired', 'purple');
                            },
                            callbackScope: this
                        });
                        logResult('Immediate timer created: ' + !!immediateTest);
                    }, 100);
                }
            }
        };

        const game = new Phaser.Game(config);
        
        logResult('Test started - watch for timer behavior before and after restart');
    </script>
</body>
</html>